<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>深入探讨深拷贝浅拷贝两兄弟 | 小猴子的后花园</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="基本数据类型在深入探讨深拷贝和浅拷贝之前，我们需要先了解一下Javascript得数据类型。众所周知JavaScript得数据类型，分为基本数据类型和引用数据类型。那么这两种类型到底有什么区别？接下来我们详细的谈谈。 导图：   js内存接下来我们还需要了解一个重要的知识点—-js中的内存 js中的内存为两种—–栈和堆。  基本数据类型存储基本数据类型的值存在栈里面，并且值与值之间独立存在，修改一">
<meta property="og:type" content="article">
<meta property="og:title" content="深入探讨深拷贝浅拷贝两兄弟">
<meta property="og:url" content="https://zmylll.github.io/2022/04/07/%E6%B7%B1%E5%85%A5%E6%8E%A2%E8%AE%A8%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%A4%E5%85%84%E5%BC%9F/index.html">
<meta property="og:site_name" content="小猴子的后花园">
<meta property="og:description" content="基本数据类型在深入探讨深拷贝和浅拷贝之前，我们需要先了解一下Javascript得数据类型。众所周知JavaScript得数据类型，分为基本数据类型和引用数据类型。那么这两种类型到底有什么区别？接下来我们详细的谈谈。 导图：   js内存接下来我们还需要了解一个重要的知识点—-js中的内存 js中的内存为两种—–栈和堆。  基本数据类型存储基本数据类型的值存在栈里面，并且值与值之间独立存在，修改一">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703142917803-1178488459.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143351261-1687988732.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143423206-1680507891.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143612873-329875212.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143646669-274301715.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144142461-1059446167.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144827023-1417118890.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144837089-665453055.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144845488-1241619390.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144855226-1681961246.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144941921-1573068162.png">
<meta property="article:published_time" content="2022-04-07T10:01:12.000Z">
<meta property="article:modified_time" content="2022-04-07T10:02:22.639Z">
<meta property="article:author" content="mingyuan zhu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703142917803-1178488459.png">
  
    <link rel="alternate" href="/atom.xml" title="小猴子的后花园" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.1.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">小猴子的后花园</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://zmylll.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-深入探讨深拷贝浅拷贝两兄弟" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/07/%E6%B7%B1%E5%85%A5%E6%8E%A2%E8%AE%A8%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%A4%E5%85%84%E5%BC%9F/" class="article-date">
  <time class="dt-published" datetime="2022-04-07T10:01:12.000Z" itemprop="datePublished">2022-04-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      深入探讨深拷贝浅拷贝两兄弟
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>在深入探讨深拷贝和浅拷贝之前，我们需要先了解一下Javascript得数据类型。众所周知JavaScript得数据类型，分为基本数据类型和引用数据类型。那么这两种类型到底有什么区别？接下来我们详细的谈谈。</p>
<p>导图：</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703142917803-1178488459.png"></p>
<hr>
<h3 id="js内存"><a href="#js内存" class="headerlink" title="js内存"></a>js内存</h3><p>接下来我们还需要了解一个重要的知识点—-js中的内存</p>
<p>js中的内存为两种—–栈和堆。</p>
<hr>
<h4 id="基本数据类型存储"><a href="#基本数据类型存储" class="headerlink" title="基本数据类型存储"></a>基本数据类型存储</h4><p>基本数据类型的值存在栈里面，并且值与值之间独立存在，修改一个值，不会影响其他的值。举个列子：把a的值传给b</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143351261-1687988732.png"></p>
<p>下面解释为什么当a的值变为124时，b为什么不改变</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143423206-1680507891.png"></p>
<p>可以看出a和b的值相互独立，当代码执行到a++时，只是a的值变为124，而b也是123</p>
<hr>
<h4 id="引用数据类型存储："><a href="#引用数据类型存储：" class="headerlink" title="引用数据类型存储："></a>引用数据类型存储：</h4><ul>
<li>对象保存在堆内存中</li>
<li>每创建一个新的对象就会在堆内存开辟一个新的空间</li>
<li>变量保存的是内存地址(对象引用)</li>
<li>两个变量保存同一个引用,一个变量修改属性时,另一个变量属性值也会变化</li>
</ul>
<p>引用数据类型在栈中存储了指针，该指针指向堆中该实体的起始地址。当解释器寻找引用值时，会首先检索其在栈中的地址，取得地址后从堆中获得实体。</p>
<p>举例说明：</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143612873-329875212.png"></p>
<p>当obj属性name变为”孙悟空”时，obj1属性name也变为”孙悟空”</p>
<p>内存分析——解释上述现象</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703143646669-274301715.png"></p>
<p>当栈存放引用类型时，值为对象的地址，obj与obj1指向同一个地址，所以当obj的name值变为“孙悟空”时，obj1也会发生变化</p>
<hr>
<p>看完这个，相信小伙伴们已经很清晰的明白，为什么会有浅拷贝和深拷贝这两兄弟了吧。那么这两个到底有什么区别尼？别着急，我们一步一步道来。</p>
<hr>
<h3 id="深拷贝和浅拷贝的区别"><a href="#深拷贝和浅拷贝的区别" class="headerlink" title="深拷贝和浅拷贝的区别"></a>深拷贝和浅拷贝的区别</h3><p>深拷贝和浅拷贝是只针对Object和Array这样的引用数据类型的。示意图大致如下：</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144142461-1059446167.png"></p>
<p>浅拷贝只复制指向某个对象的指针，而不复制对象本身，新旧对象还是共享同一块内存。但深拷贝会另外创造一个一模一样的对象，新对象跟原对象不共享内存，修改新对象不会改到原对象。</p>
<hr>
<h3 id="赋值和浅拷贝的区别"><a href="#赋值和浅拷贝的区别" class="headerlink" title="赋值和浅拷贝的区别"></a>赋值和浅拷贝的区别</h3><p>当我们把一个对象赋值给一个新的变量时，赋的其实是该对象的在栈中的地址，而不是堆中的数据。也就是两个对象指向的是同一个存储空间，无论哪个对象发生改变，其实都是改变的存储空间的内容，因此，两个对象是联动的。</p>
<p>浅拷贝是按位拷贝对象，它会创建一个新对象，这个对象有着原始对象属性值的一份精确拷贝。如果属性是基本类型，拷贝的就是基本类型的值；如果属性是内存地址（引用类型），拷贝的就是内存地址 ，因此如果其中一个对象改变了这个地址，就会影响到另一个对象。即默认拷贝构造函数只是对对象进行浅拷贝复制(逐个成员依次拷贝)，即只复制对象空间而不复制资源。</p>
<p>我们先来看两个例子，对比赋值与浅拷贝会对原对象带来哪些改变？</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144827023-1417118890.png"><br><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144837089-665453055.png"><br><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144845488-1241619390.png"><br><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144855226-1681961246.png"></p>
<p>上面例子中，obj1是原始数据，obj2是赋值操作得到，而obj3浅拷贝得到。我们可以很清晰看到对原始数据的影响，具体请看下表：</p>
<p><img src="https://img2020.cnblogs.com/blog/2050700/202007/2050700-20200703144941921-1573068162.png"></p>
<hr>
<h4 id="浅拷贝的实现方法"><a href="#浅拷贝的实现方法" class="headerlink" title="浅拷贝的实现方法"></a>浅拷贝的实现方法</h4><ul>
<li>1、Object.assign()</li>
</ul>
<p>Object.assign()方法可以将任意多个的源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象。但是该方法拷贝的时候是浅拷贝，拷贝的是对象的属性的引用，并不是对象本身。（注意：当object只有一层的时候，就是浅拷贝）</p>
<ul>
<li>2、Array.prototype.concat()</li>
<li>3、Array.prototype.slice()</li>
</ul>
<hr>
<h4 id="深拷贝的实现方法"><a href="#深拷贝的实现方法" class="headerlink" title="深拷贝的实现方法"></a>深拷贝的实现方法</h4><ul>
<li>1、JSON.parse(JSON.stringify())</li>
</ul>
<p>JSON.stringify()是前端开发过程中比较常用的深拷贝方式。原理是把一个对象序列化成为一个JSON字符串，将对象的内容转换成字符串的形式再保存在磁盘上，再用JSON.parse()反序列化将JSON字符串变成一个新的对象。</p>
<ul>
<li>2、自己递归实现一个简单深拷贝</li>
</ul>
<p>深拷贝，主要用到的思想是递归，遍历对象、数组直到里边都是基本数据类型，然后再去复制，就是深度拷贝。</p>
<p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//定义检测数据类型的功能函数</span><br><span class="line">    function isObject(obj) &#123;</span><br><span class="line">	    return typeof obj === &#x27;object&#x27; &amp;&amp; obj != null;</span><br><span class="line">    &#125;</span><br><span class="line">   function cloneDeep(source) &#123;</span><br><span class="line"></span><br><span class="line">    if (!isObject(source)) return source; // 非对象返回自身</span><br><span class="line">      </span><br><span class="line">    var target = Array.isArray(source) ? [] : &#123;&#125;;</span><br><span class="line">    for(var key in source) &#123;</span><br><span class="line">        if (Object.prototype.hasOwnProperty.call(source, key)) &#123;</span><br><span class="line">            if (isObject(source[key])) &#123;</span><br><span class="line">                target[key] = cloneDeep(source[key]); // 注意这里</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                target[key] = source[key];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>3、第三方深拷贝库</li>
</ul>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000018874254">https://segmentfault.com/a/1190000018874254</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zmylll.github.io/2022/04/07/%E6%B7%B1%E5%85%A5%E6%8E%A2%E8%AE%A8%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%A4%E5%85%84%E5%BC%9F/" data-id="cl1otyutn000093wxapu7fd3f" data-title="深入探讨深拷贝浅拷贝两兄弟" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/04/07/%E5%B8%B8%E7%94%A8js%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          常用js正则表达式
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/07/vue%E7%BA%B2%E8%A6%81/">vue纲要</a>
          </li>
        
          <li>
            <a href="/2022/04/07/%E5%B8%B8%E7%94%A8js%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">常用js正则表达式</a>
          </li>
        
          <li>
            <a href="/2022/04/07/%E6%B7%B1%E5%85%A5%E6%8E%A2%E8%AE%A8%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%A4%E5%85%84%E5%BC%9F/">深入探讨深拷贝浅拷贝两兄弟</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 mingyuan zhu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>